def count_numbers_with_4_zeros(N, K):
    if N == 0:
        return 0

    # Инициализация динамического массива
    dp = [[0] * 4 for _ in range(N + 1)]
    dp[1][0] = K - 1  # Первая цифра не может быть нулем

    for i in range(2, N + 1):
        # Вычисляем количество чисел, заканчивающихся на 0 нулей
        total_prev = sum(dp[i - 1])
        dp[i][0] = total_prev * (K - 1)

        # Обновляем состояния для 1, 2, 3 нулей подряд
        dp[i][1] = dp[i - 1][0]
        dp[i][2] = dp[i - 1][1]
        dp[i][3] = dp[i - 1][2]

    # Сумма всех допустимых чисел без 4+ нулей подряд
    sum_valid = sum(dp[N])
    total = (K - 1) * (K ** (N - 1))
    return total - sum_valid


def main():
    print("Программа подсчитывает количество K-ичных чисел из N разрядов, содержащих более трех подряд идущих нулей.")
    print("Ограничения: 2 ≤ K ≤ 10, 1 < N < 20, N + K < 26")

    while True:
        try:
            N = int(input("Введите количество разрядов N (1 < N < 20): "))
            if not (1 < N < 20):
                print("Ошибка: N должно быть в диапазоне (1, 20). Попробуйте снова.")
                continue

            K = int(input("Введите основание системы счисления K (2 ≤ K ≤ 10): "))
            if not (2 <= K <= 10):
                print("Ошибка: K должно быть в диапазоне [2, 10]. Попробуйте снова.")
                continue

            if N + K >= 26:
                print("Ошибка: N + K должно быть меньше 26. Попробуйте снова.")
                continue

            result = count_numbers_with_4_zeros(N, K)
            print(f"Количество {K}-ичных чисел из {N} разрядов с более чем тремя подряд нулями: {result}")
            break

        except ValueError:
            print("Ошибка: Введите целое число. Попробуйте снова.")


if __name__ == "__main__":
    main()
